# 关于事件和触发器

## 2023/10/04  OHMS

事件 event

触发器 trigger

事件和触发器等操作可以通过注册回调函数实现，比如某个需要事件触发的对象，可以自主向一个触发器实例添加一个指向自己成员函数的std::function。虽然相比于直接保存对对象的引用，这样注册函数可能提高内存占用，但是效率也许会高一点，因为只有触发器里真的注册了函数才会在触发时调用，要是大家都不用这个触发器，那它就是空的，不会调用函数。毕竟函数调用的成本还是可观的，你也不想在一个频繁但没人在乎的事件触发的时候所有角色每次全都被调用函数通知一遍吧（。

使用一个unsigned int作为唯一编号，用于校验锁定。

每个单位都拥有一个std::function作为更新入口，由状态机维护。